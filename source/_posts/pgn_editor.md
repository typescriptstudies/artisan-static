---
title: 'Pgn Editor - an alternative to lichess analysis board / study'
date: 2019-05-11
comments: false
---
# Pgn Editor

Pgn Editor is an open source, lightweight tool for creating, editing and sharing multi variation chess variant games:

- __[Pgn Editor online](https://pgneditor.herokuapp.com)__

- [source code on GitHub](https://github.com/pgneditor/pgneditor)

- [source code on GitLab](https://gitlab.com/pgneditor/pgneditor)

# Motivation

Lichess has two tools for game editing and sharing: [analysis board](https://lichess.org/analysis) and [study](https://lichess.org/study). Both tools have their own shortcomings. For example analysis board cannot import multi variation PGNs, only the main line is imported. It has no persistence, it does not remember the variant it was last set to. Study does not suffer from these disadvantages, however it has its own weaknesses:

- when embedding, only the moves from the main line can be linked, so you have to create a separate study to be able to show a sub variation node

- there is no easy editable text / copy access to the PGN or current line, the only option is to download the whole study or the chapter PGN

- there is no easy way of cloning a study or a chapter

- setting up a study takes several steps, despite in many cases you just want a clean board with the variant starting position

- there is no good visually tractable tree representation of the game

Pgn Editor tries to address these issues and aims to be something in complexity between analysis board and study, without all the shortcomings of the former and adding as much flexibility, convenience and handy features as possible. Pgn Editor on the other is not aimed at multiple contributors, chat or realtime collective editing of the game.

# Organization

Pgn Editor does not make a difference between studies and chapters, every item is like a chapter of a lichess study, has its own title, id and separate existence.

## Default study

Any board editing in Pgn Editor can only be interpreted in the context of a study, so there has to be at least one study, which is generated by default, cannot be deleted or renamed, this is the Default study ( of variant standard ). If you start making moves on a fresh instance of Pgn Editor, these moves will go into the default study.

## Creating a study

To create a new study, go the Studies tab, select a variant from the combo and press "Create new":

You can choose a title by filling in the popup, however a default title is provided, so it is enough to press Ok.

## Selecting a study

There is always exactly one study selected, shown with a different background in the study list. You can select a study by clicking on its title. Upon creation the newly created study becomes selected. After deleting a study, the Default study becomes selected. All editing always pertains to the selected study.

## Cloning a study

To clone a study, click on the `Clone` button of the study.

## Downloading a study

To download a study, click on the `Download` button of the study.

## Deleting a study

To delete a study, click on the `Delete` button of the study.

# Editing a study

## Editing the title of a study

To edit a study's title, click on the `Edit Title` button of the study.

## Editing the moves of a study

Editing can be done using the controls above the board:

![](/assets/screenshots/editstudyreset.PNG) &nbsp;&nbsp;&nbsp;reset game, _deletes all moves_

![](/assets/screenshots/editstudytobegin.PNG) &nbsp;&nbsp;&nbsp;jump to the starting position

![](/assets/screenshots/editstudyback.PNG) &nbsp;&nbsp;&nbsp;back one move

![](/assets/screenshots/editstudyforward.PNG) &nbsp;&nbsp;&nbsp;forward one move

![](/assets/screenshots/editstudytoend.PNG) &nbsp;&nbsp;&nbsp;jump to end of line

![](/assets/screenshots/editstudydel.PNG) &nbsp;&nbsp;&nbsp;delete move _and all child moves_

![](/assets/screenshots/editstudyflip.PNG) &nbsp;&nbsp;&nbsp;flip board

<a name="setfrompgn"></a>

## Editing drawings

Drawings can be associated with each position. These are arrows and circles of various color and thickness and serve the purpose of graphically explaining ideas in the position.

![](/assets/screenshots/draw.PNG) &nbsp;&nbsp;&nbsp;To start editing drawings, press the pencil button above the board. A drawing panel will open up, that lets you select shape, color, thickness and frame duration. When finished with drawing, press this button again. Note that in drawing mode drag and drop move input does not work.

### Arrows

To draw an arrow, select the arrow shape, click on the initial square and then on the target square.

### Circles

To draw a circle, select the circle shape and click on a square.

### Frame duration

You can enter a frame duration for every position. This is interpreted as milliseconds, and determines the period of time for which the position will be shown, when creating an animation.

## Animations

To create an animated GIF of successive positions, go to the "Tools" tab and press "Init GIF". Select a position on the board, then press "Add frame". Repeat this for every position in your animation. Then press "Render". This will open the animated GIF in a new window, from where you can download it.

### Adding comments to animation

To add comments to the animation, check the "Add comments to frame" checkbox.

### Chaning the size of the animation

Animation follows the what you see is what you get principle, so the board size will the actual size you see on the screen. If you need a smaller animation then choose a smaller maximum board size using the "Max board size" combo.

## Position screenshot

### GIF screenshot

To create a GIF position screenshot, create an animation with a single frame.

### PNG screenshot

To create a PNG screenshot in the "Tools" tab click on "Export board screenshot". This will only export the board without comments. The screenshot is downloaded directly without opening it in a new window. This is the recommended way of creating a screenshot of a single position.

## Setting up study from PGN

To set up a study from a PGN, copy the PGN to the clipboard, go to the "Game" tab and press "Paste". If you browser does not support auto pasting, then delete everything from the text box, paste the PGN manually and then press "Paste" to initiate parsing.

_Note that setting up the study form a PGN will delete all existing moves._

## Setting up study from FEN

To set up a study from FEN, copy the FEN to the clipboard, press "Paste" in on the FEN text input above the board. If you browser does not support auto pasting, then delete everything from the text box, paste the FEN manually and then press "Paste" to initiate parsing.

_Note that setting up the study form a FEN will delete all existing moves._

## Merging moves into a study

To merge moves, copy the moves in PGN format, or copy a full PGN to the clipboard, then in the "Tools" tab press "Paste" on the "Merge moves" text input. If you browser does not support auto pasting, then delete everything from the text box, paste the moves list / PGN manually and then press "Paste" to initiate parsing.

Merging moves will keep all your existing moves, but overwrite the comments / nags / drawings / train weights with the merged ones if there is collision.

### Merging multiple PGNs

You can merge multiple PGNs at once ( best if the PGNs are separated by two empty lines, but the parser is forgiving ). You can monitor which game is being processed in the "Merge moves" textbox. Yo can specify a ply limit up to which the PGNs should be merged in the "Max plies" combo. If there are a lot of PGNs, it is recommended that you use a low ply limit. Wait patiently, there is some delay between processing each game in order that the server and the client are not overloaded. Building a book from multiple PGNs is an expensive operation.

## Compatiblity with lichess study

Pgn Editor study is 100% compatible with a lichess study chapter.

## Exporting study to lichess study chapter

Go to the "Game" tab, press "Copy" on the PGN text input box. Then create a lichess study chapter from this PGN.

## Importing lichess study chapter

Download the lichess study chapter as PGN, open the file, copy the PGN to the clipboard, then follow the instructions in <a href="#setfrompgn">Setting up study from PGN</a>.

<a name="repertoiretrainer"></a>

# Repertoire trainer

You can build a training repertoire by assigning training weights to moves. To do this, switch to the "Book" tab. There are two combo boxes for each moves. The first one is the weight with which you are required to make this move. The second one is the weight with which the trainer will play this move against you. Every move originally has both weights set to 0. Moves having weight 0 are ignored during training.

## Start training

To start the training, switch to the "Train" tab and select a training mode from the combo. In case you select 'Train white", the trainer will check your move with white and auto play moves for black, if you select "Train black", the trainer will check your move with black auto play moves for white.

If you make a move that has less than the maximum weight, you will get warned, but you can continue playing. If you make a move with the maximum weight, you will never get warned. This way you can practice a diverse repertoire, but get some negative feedback, if you don't play the best possible move in a given position.

## Stop training

To stop the training, set the combo in the "Train" tab to "Training off".

Always turn off training when you want to edit your repertoire and turn it back on when you have made all your changes.

## Set train root

By default training starts from the starting position of the study. If you want to change this, navigate to the desired position, then in the "Train" tab press "Set train root to current position".

If the train root position is deleted from the study, the starting position becomes the train root again.

The train root is not remembered, you have to set it manually for every session.

# Account

## Anonymous login

The application by default uses anonymous login. This means that you are automatically assinged a user ID simply by opening the application in your browser. The user ID is stored in your device's local storage, no cookie is used. This user ID is permanent as far as the local storage of your device is not cleared. If you use anonymous login, it is safest to write down your user ID on a piece of paper.

You can always login with user user ID either on the same device if the local storage is cleared, or on any other device.

## Login with lichess account

You can also tie your login to your lichess identity. For this open the profile tab, type in your lichess username and press "Login". You will receive a verification code, that you have to temporarily insert into the introduction of your lichess profile. When ready, press "Verify". If the application finds the code in your profile, you will be granted your lichess username. You can always recover your account by repeating the verification process. This is the recommended login type.

# Keyboard navigation

For selecting a move in a given position use the Up and Down arrow keys. If you switch to the "Book" view, you can see which move is selected, but keyboard navigation works in any other view as well. To make the selected move use Arrow Right, to go back one move, press Arrow Left. You can go back to the starting position with Ctrl + Arrow Left and to the end of the line with Ctrl + Arrow Right. Move ordering can be affected by setting the training weights next to the move. Moves are ordered according to the first weight ( my weight ) and if this is equal, than according to the second weight ( opponent weight ).

# Sharing your study

## Import link

In the "Tools" tab you find an "Import link". You can share this link. When this link is clicked by a third party user, your study will open and a copy of it will be added to the studies of the user opening it. If you click on your own import link, the study will open and become your selected study, but no new clone of the study will be added to your own studies.

## Embed

Copy the "Embed" tag in the "Tools" tab into your web page. This will have the same effect as import link, but open the study in a HTML Iframe.

# Search games of a user

To search games of a user having the moves of the current line and the variant of the study go to the "Tools" tab and type in the lichess user name into "Search username" ( case insensitive ). Board flip matters, when the board is flipped black games of the user will be searched. To initiate the search, press "Search games of user with current moves".

# Current line

To copy the current line in PGN notation, go to the "Tools" tab and press "Copy" on "Line".